# Model

数据模型包是应用程序的数据层，用于定义所有数据结构和转换逻辑。该包采用分层结构，确保数据处理的清晰性和可维护性。

## 目录结构

### 1. common/
- 通用数据模型
- 跨功能模块共享的数据结构
- 基础数据类型定义

### 2. entity/
- 核心业务实体模型
- 对应数据库表结构的实体类
- 包含实体间的关系定义

### 3. request/
- API 请求参数模型
- 用于网络请求的参数封装
- 请求数据的验证逻辑

### 4. response/
- API 响应数据模型
- 服务器返回数据的结构定义
- 响应数据的解析逻辑

## 代码生成

### 何时需要生成代码

在以下情况下需要运行代码生成命令：

1. 新增或修改模型类
   - 添加了新的 `@JsonSerializable()` 注解的类
   - 修改了现有模型类的属性
   - 更新了模型类的序列化规则

2. 更新 API 相关模型
   - 修改了请求参数模型
   - 更新了响应数据结构
   - 添加了新的 API 模型类

### 生成命令

在项目根目录下执行以下命令：

```shell
# 生成代码（一次性）
dart run build_runner build
```

```shell
# 清理旧的生成文件
dart run build_runner clean
```

```shell
# 持续监听文件变化并自动生成
dart run build_runner watch
```

## 使用指南

1. 模型定义规范：
   - 所有模型类都应该是不可变的（immutable）
   - 使用 `@JsonSerializable()` 注解实现 JSON 序列化
   - 提供 `copyWith` 方法用于对象复制
   - 实现 `toString`、`==` 和 `hashCode` 方法

2. 命名规范：
   - 请求模型类名以 `Request` 结尾
   - 响应模型类名以 `Response` 结尾
   - 实体模型类使用领域相关的名称
   - 通用模型类使用描述性名称

3. 文件组织：
   - 每个模型类单独一个文件
   - 文件名使用小写下划线命名法
   - 相关的模型类放在同一目录下

## 注意事项

1. 代码生成
   - 修改模型后必须运行代码生成命令
   - 如遇生成冲突，先执行 clean 后再 build
   - 开发时建议使用 watch 命令自动生成

2. 模型设计
   - 保持模型结构的简单性和清晰性
   - 避免循环依赖
   - 合理使用继承和组合
   - 注意数据验证和类型安全

3. 性能考虑
   - 大型列表考虑分页加载
   - 合理使用缓存机制
   - 注意内存占用

4. 文档维护
   - 为复杂的模型添加文档注释
   - 记录模型的变更历史
   - 说明特殊的序列化逻辑 